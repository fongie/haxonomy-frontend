{"ast":null,"code":"import _defineProperty from \"/Users/ocean/Documents/KTH/XJobb/Haxonomy Web App/haxonomy-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/Users/ocean/Documents/KTH/XJobb/Haxonomy Web App/haxonomy-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _possibleConstructorReturn from \"/Users/ocean/Documents/KTH/XJobb/Haxonomy Web App/haxonomy-frontend/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ocean/Documents/KTH/XJobb/Haxonomy Web App/haxonomy-frontend/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _createClass from \"/Users/ocean/Documents/KTH/XJobb/Haxonomy Web App/haxonomy-frontend/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/Users/ocean/Documents/KTH/XJobb/Haxonomy Web App/haxonomy-frontend/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/Users/ocean/Documents/KTH/XJobb/Haxonomy Web App/haxonomy-frontend/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/Users/ocean/Documents/KTH/XJobb/Haxonomy Web App/haxonomy-frontend/src/components/AddTerm.js\";\nimport React, { Component } from \"react\";\nimport { server } from '../config';\nimport { withRouter } from 'react-router-dom';\n/**\n * Presents the user with input fields for registration of new user. Given values are posted to the server using fetch.\n */\n\nvar AddTerm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(AddTerm, _Component);\n\n  _createClass(AddTerm, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {}\n  }]);\n\n  function AddTerm(props) {\n    var _this;\n\n    _classCallCheck(this, AddTerm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(AddTerm).call(this, props));\n    _this.state = {\n      email: \"\",\n      password: \"\",\n      emailError: \"\",\n      passwordError: \"\",\n      genericErrorMessage: \"*required\"\n    };\n    _this.handleInputChange = _this.handleInputChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.errors = _this.errors.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(AddTerm, [{\n    key: \"handleInputChange\",\n    value: function handleInputChange(event) {\n      var _this$setState;\n\n      var target = event.target;\n      var value = target.value;\n      var name = target.name;\n      this.setState((_this$setState = {}, _defineProperty(_this$setState, name, value), _defineProperty(_this$setState, name + \"Error\", null), _this$setState));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"form\", {\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, \"Email:\", React.createElement(\"input\", {\n        name: \"email\",\n        type: \"email\",\n        value: this.state.email,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }), !!this.state.emailError && React.createElement(\"p\", {\n        style: {\n          color: 'red',\n          float: \"right\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, this.state.emailError)), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      }, \"Password:\", React.createElement(\"input\", {\n        name: \"password\",\n        type: \"password\",\n        value: this.state.password,\n        onChange: this.handleInputChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }), !!this.state.passwordError && React.createElement(\"p\", {\n        style: {\n          color: 'red',\n          float: \"right\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, this.state.passwordError)), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Submit\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }));\n    }\n    /**\n     * Checks if any of the input fields are empty and in that case sets the corresponding error state variable to an\n     * error message.\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"errors\",\n    value: function errors() {\n      var _this2 = this;\n\n      var error = false;\n\n      if (this.state.email === null || this.state.email === \"\") {\n        this.setState(function () {\n          return {\n            emailError: _this2.state.genericErrorMessage\n          };\n        });\n        error = true;\n      }\n\n      if (this.state.password === null || this.state.password === \"\") {\n        this.setState(function () {\n          return {\n            passwordError: _this2.state.genericErrorMessage\n          };\n        });\n        error = true;\n      }\n\n      return error;\n    }\n    /**\n     * Checks for errors and then post form to server. Redirects to login page on success, displays error message on failure.\n     * @param event\n     */\n\n  }, {\n    key: \"handleSubmit\",\n    value: function handleSubmit(event) {\n      var _this3 = this;\n\n      event.preventDefault();\n      if (this.errors()) return;\n      var jsonRequest = {\n        \"password\": this.state.password,\n        \"email\": this.state.email\n      };\n      fetch(server + '/registration', {\n        credentials: 'include',\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(jsonRequest)\n      }).then(function (response) {\n        return response.json();\n      }).then(function (response) {\n        console.log(response);\n\n        if (response.error && response.status === 409) {\n          throw new Error(\"The username already exists, please try another.\");\n        }\n\n        if (response.error) throw new Error(\"Something went wrong, please try again in a few minutes\");else return response;\n      }).then(function (data) {\n        alert(\"User created\");\n\n        _this3.props.history.replace('/login');\n      }).catch(function (e) {\n        alert(e.message);\n      });\n    }\n  }]);\n\n  return AddTerm;\n}(Component);\n\nexport default withRouter(AddTerm);","map":{"version":3,"sources":["/Users/ocean/Documents/KTH/XJobb/Haxonomy Web App/haxonomy-frontend/src/components/AddTerm.js"],"names":["React","Component","server","withRouter","AddTerm","props","state","email","password","emailError","passwordError","genericErrorMessage","handleInputChange","bind","handleSubmit","errors","event","target","value","name","setState","color","float","error","preventDefault","jsonRequest","fetch","credentials","method","headers","body","JSON","stringify","then","response","json","console","log","status","Error","data","alert","history","replace","catch","e","message"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\nimport {server} from '../config';\nimport { withRouter } from 'react-router-dom'\n\n/**\n * Presents the user with input fields for registration of new user. Given values are posted to the server using fetch.\n */\nclass AddTerm extends Component{\n\n    componentDidUpdate(){\n\n    }\n\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            email: \"\",\n            password: \"\",\n            emailError: \"\",\n            passwordError: \"\",\n            genericErrorMessage: \"*required\"\n\n        }\n\n        this.handleInputChange = this.handleInputChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n        this.errors = this.errors.bind(this);\n    }\n\n    handleInputChange(event) {\n        const target = event.target;\n        const value = target.value;\n        const name = target.name;\n\n        this.setState({\n            [name]: value,\n            [name + \"Error\"]: null,\n        });\n    }\n\n    render(){\n        return (\n            <form onSubmit={this.handleSubmit}>\n                <label>\n                    Email:\n                    <input\n                        name=\"email\"\n                        type=\"email\"\n                        value={this.state.email}\n                        onChange={this.handleInputChange} />\n                    {!!this.state.emailError && (<p style={{color: 'red', float: \"right\"}}>{this.state.emailError}</p>)}\n                </label>\n                <br />\n                <label>\n                    Password:\n                    <input\n                        name=\"password\"\n                        type=\"password\"\n                        value={this.state.password}\n                        onChange={this.handleInputChange} />\n                    {!!this.state.passwordError && (<p style={{color: 'red', float: \"right\"}}>{this.state.passwordError}</p>)}\n                </label>\n                <br/>\n                <input type=\"submit\" value=\"Submit\" />\n            </form>\n        )\n    }\n\n    /**\n     * Checks if any of the input fields are empty and in that case sets the corresponding error state variable to an\n     * error message.\n     * @returns {boolean}\n     */\n    errors(){\n        let error = false;\n        if (this.state.email === null || this.state.email === \"\") {\n            this.setState(() => ({ emailError: this.state.genericErrorMessage}));\n            error = true;\n        }\n        if (this.state.password === null || this.state.password === \"\") {\n            this.setState(() => ({ passwordError: this.state.genericErrorMessage}));\n            error = true;\n        }\n        return error;\n\n    }\n\n    /**\n     * Checks for errors and then post form to server. Redirects to login page on success, displays error message on failure.\n     * @param event\n     */\n    handleSubmit(event) {\n        event.preventDefault();\n        if(this.errors())\n            return;\n        const jsonRequest =\n            {\n                \"password\": this.state.password,\n                \"email\": this.state.email,\n            }\n        fetch(server + '/registration', {\n            credentials: 'include',\n            method: 'POST',\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify(jsonRequest),\n        }).then((response) => {\n            return response.json();\n        }).then((response) => {\n            console.log(response)\n            if ((response.error) && response.status === 409) {throw new Error(\"The username already exists, please try another.\")}\n            if(response.error) throw new Error(\"Something went wrong, please try again in a few minutes\");\n            else return response;\n        }).then((data) => {\n                alert(\"User created\");\n            this.props.history.replace('/login');\n            })\n            .catch((e) => {\n                alert(e.message);\n            });\n    }\n}\n\nexport default  withRouter(AddTerm);"]},"metadata":{},"sourceType":"module"}